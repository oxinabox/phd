%\RequirePackage{luatex85,shellesc}
\documentclass[tikz]{standalone}
\usepackage{tikz}
\usetikzlibrary{positioning}
\usetikzlibrary{decorations.pathmorphing}
\usetikzlibrary{graphs,graphs.standard,graphdrawing,arrows}
\usegdlibrary{layered, trees, force}

\renewcommand{\familydefault}{\sfdefault}

\begin{document}
	
\providecommand{\pkg}[2][]{
	\node[#1,package](#2) {#2.jl}
}

	
\providecommand{\repo}[2][]{
	\node[#1,repo](#2) {#2}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\tikzset{%
	->,
	align=center,
	node distance=10cm, sibling distance=25mm, level distance=40mm,
	thick,
	package/.style={draw, circle, very thick},
	mypackage/.style={package, blue},
	repo/.style={draw, very thick, purple},
	supports/.style={dotted},
	indirect/.style={decoration={snake}, decorate, very thick, purple}
}




\begin{tikzpicture}[layered layout,	grow'=up,]
	\node[nudge=(left:12mm)](researchcode){Research Code};

	\pkg[mypackage, nudge=(right:17mm)]{CorpusLoaders};
	
	\pkg[mypackage]{DataDeps};
	\pkg[mypackage]{DataDepsGenerators};
%	\pkg[mypackage]{ReferenceTests};
	\pkg[mypackage]{MD5};
	\pkg[]{SHA};

	\node(MultiResolutionIterators)[mypackage]{Multi--\\Resolution--\\Iterators.jl};
	
	\pkg[mypackage]{InternedStrings};
	\pkg[]{Strs};
	\pkg[]{CSV};
	

	\pkg{MLDatasets};
%	\pkg[mypackage]{ExpectationStubs};
	\pkg{HTTP};
	\pkg[nudge=(right:15mm)]{WordNet};
	\pkg[mypackage, nudge=(right:4mm)]{Embeddings};


	\pkg[mypackage]{WordTokenizers};
	\pkg{RevTok};

	
	\repo{CRAN};
	\repo{DataDryad};
	\repo{GitHub};
	\repo{European Data Portal};
	\repo[]{Open.Canada.ca};
	\repo{Data.gov};
	\repo{Data.gov.au};
	\repo{DataOne};
	\repo{538};
	\repo{BuzzFeedNews};
	\repo{UCI ML Repository};
	\repo{ArcticDataCenter};
	\repo{KnowledgeNetworkforBiocomplexity};
	\repo{TERN};
	\repo{DataCite};
	\repo{Zenodo};
	\repo{FigShare};
	
	
	\node[sibling distance=0mm](gap){};
	
	\graph{
		(researchcode) <- {(MLDatasets), (Embeddings), (WordNet), (CorpusLoaders)} <- (DataDeps);
		(DataDeps) ->[bend left, looseness=0, in=167, out=0] (researchcode);

	 
		{(CorpusLoaders) <- {(MultiResolutionIterators), (WordTokenizers), (InternedStrings)}};
		(DataDeps) <- {(HTTP), (SHA)};
		(DataDeps) <-[supports] (MD5);
		
		(DataDeps) <-[indirect] (DataDepsGenerators) <- {
			(GitHub) <- {(538), (BuzzFeedNews)},
			(UCI ML Repository),
			(CRAN) <- {(Open.Canada.ca), (Data.gov.au), (Data.gov), (European Data Portal)},
			(DataCite) <- {(Zenodo), (FigShare)},
			(DataDryad),
			(DataOne) <- {(ArcticDataCenter), (TERN), (KnowledgeNetworkforBiocomplexity)},
		};
	
		(WordTokenizers) <-[supports] (RevTok);
		(InternedStrings) <-> [supports] (Strs);
		(InternedStrings) ->[supports] (CSV);
	};
\end{tikzpicture}


\end{document}