\documentclass{book}
\input{preamble.tex}


\begin{document}


\chapter{DataDepsGenerators.jl: making reusing data easy by automatically generating DataDeps.jl registration code}
\preamble{This paper is currently under review for the Journal of Open Source Software.}


\hypertarget{summary}{%
	\section{Summary}\label{summary}}

DataDepsGenerators.jl is a tool written to help users of the Julia
programming language \citep{Julia}, to observe best practices when
making use of published datasets. Using the metadata present in
published datasets, it generates the code for the data dependency
registration blocks required by DataDeps.jl
\citep{2018arXiv180801091W}. These registration blocks are effectively
executable metadata, which can be resolved by DataDeps.jl to download
the dataset. They include a message that is displayed to the user
whenever the data set is automatically downloaded. This message should
include provenance information on the dataset, so that downstream users
know its original source and details on its processing.

DataDepsGenerators.jl attempts to use the metadata available for a
dataset to capture and record:

\begin{itemize}
	
	\item
	The dataset name.
	\item
	A URL for a website about the dataset.
	\item
	The names of the authors and maintainers
	\item
	The creation date, publication date, and the date of the most recent
	modification.
	\item
	The license that the dataset is released under.
	\item
	The formatted bibliographic details of any paper about or relating to
	the dataset.
	\item
	The formatted bibliographic details of how to cite the dataset itself.
	\item
	A list of URLs where the files making up the dataset can be
	downloaded.
	\item
	A corresponding list of file hashes, such as MD5 or SHA256, to
	validate the files after download.
	\item
	A description of the dataset.
\end{itemize}

Depending on the APIs supported by the repository some of this
information may not be available. DataDepsGenerators.jl makes a
best-effort attempt to acquire as much provenance information as
possible. Where multiple APIs are supported, it makes use of all APIs
possible, merging their responses to fill any gaps. It thus often
produces higher quality and more comprehensive dataset metadata than is
available from any one source.

DataDepsGenerators.jl leavages many different APIs to support a very
large number of repositories. By current estimates tens of millions of
datasets are supported, from hundreds of repositories. The APIs
supported include:

\begin{itemize}[noitemsep,topsep=0pt]
	\item
	\href{https://datacite.org/}{DataCite} /
	\href{https://www.crossref.org/}{CrossRef}
	
	\begin{itemize}
		\item
		This is valid for the majority of all dataset with a DOI.
	\end{itemize}
	\item
	\href{https://www.dataone.org/}{DataOne}
	
	\begin{itemize}
		\item
		This supports a number of data repositories used in the earth
		sciences.
	\end{itemize}
	\item
	\href{http://figshare.com/}{FigShare}
	\begin{itemize}
		\item
		A popular general purpose data repository.
	\end{itemize}
	\item
	\href{http://datadryad.org/}{DataDryad}
	
	\begin{itemize}
		
		\item
		A data repository particularly popular with evolutionary biology and
		ecology.
	\end{itemize}
	\item
	\href{https://archive.ics.uci.edu/ml/}{UCI ML repository}
	
	\begin{itemize}
		
		\item
		A data repository commonly used for small-medium machine learning
		benchmark datasets.
	\end{itemize}
	\item
	\href{https://github.com}{GitHub}
	
	\begin{itemize}
		
		\item
		Most well known for hosting code; but is fairly regularly used to
		host versioned datasets.
	\end{itemize}
	\item
	\href{http://ckan.org/}{CKAN}
	
	\begin{itemize}
		
		\item
		This is the system behind a large number of government open data
		initiatives;
		\item
		such as \href{https://data.gov}{Data.Gov},
		\href{https://data.gov.au/}{data.gov.au}, and the
		\href{https://www.europeandataportal.eu/}{European Data Portal}
	\end{itemize}
	\item
	Embedded JSON-LD fragments in HTML pages.
	
	\begin{itemize}
		
		\item
		This is commonly used on many websites to describe their datasets.
		\item
		Including many of those listed above.
		\item
		But also \href{https://zenodo.org/}{Zenodo},
		\href{https://www.kaggle.com/datasets}{Kaggle Datasets}, all
		\href{https://dataverse.org/}{DataVerse} sites and many others.
	\end{itemize}
\end{itemize}

DataDepsGenerators.jl as the name suggests, generates static code which
the user can add into their project's julia source code to make use of
with DataDeps.jl. There are a number of reasons why static code
generation is preferred over directly using the APIs. - On occasion the
information reported by the APIs is wrong or incomplete. By generating
code that the user may edit they may tweak the details as required. -
The process of accessing the APIs requires a number of heavy
dependencies, such as HTML and JSON parsers. If these APIs were to be
access directly by a project, it would require adding this large
dependency tree to the project. - It is important to know if a dataset
has changed. As such retrieving the file hash and last modification date
would be pointless if they are updated automatically. Finally: having
the provenance information recorded in plain text, makes the dataset
metadata readily accessible to anyone reading the source code; without
having to run the project's application.

The automatic downloading of data is important to allow for robustly
replicable scientific code. The inclusion of provenance information is
required to give proper credit and to allow for good understanding of
the dataset's real world context. DataDepsGenerators.jl makes this easy
by automating most of the work.

\hypertarget{other-similar-packages}{%
	\subsection{Other similar packages}\label{other-similar-packages}}

In the R software ecosystem there exists a several packages which only
support a single provider of data. These vary in their support for
different functionality. They often support things beyond the scope of
DataDepsGenerators.jl, to search, or upload data to the supported
repository. Examples include:

\begin{itemize}
	\item
	\href{https://github.com/ropensci/rdryad}{rdryad for DataDryad}
	\item
	\href{https://github.com/ropensci/rfigshare}{rfigshare for FigShare}
	\item
	\href{https://github.com/ropensci/ckanr}{ckanr for CKAN}
	\item
	\href{https://github.com/ropensci/rdatacite}{rdatacite for DataCite}
	\item
	\href{https://github.com/DataONEorg/rdataone}{rdataone for DataOne}
\end{itemize}

To the best of our knowledge at present their is not any unifying R
package that supports anywhere near the range of data repostories
supported by DataDepsGenerators.jl. Contemporaneously, with the creation
of DataDepsGenerator.jl, the was proposed package
(\href{https://github.com/ropenscilabs/doidata}{doidata}) to acquire
data based on a DOI. While this has yet to eventuate into usable
software, several of the discussions relating to it were insightful, and
contributed to the functionality of DataDepsGenerators.jl

\hypertarget{acknowledgements}{%
\subsection{Acknowledgements}\label{acknowledgements}}

This work was largely carried out as a
\href{https://medium.com/@sebastinsanty/google-summer-of-code-2018-julia-computing-report-8d3f553d7050}{Google
Summer of Code project}, as part of the NumFocus organisation. It also
benefited from funding from Australian Research Council Grants
DP150102405 and LP110100050.

We also wish to thank the support teams behind the APIs and repositories
listed above. In the course of creating this tool we thoroughly
exercised a number of APIs. In doing so we encountered a number of bugs
and issues; almost all of which have now been fixed, by the attentive
support and operation staff of the providers.


\end{document}
